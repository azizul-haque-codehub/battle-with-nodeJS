<input type="file" id="imgInput">
<canvas id="canvas"></canvas>

<script>
const input = document.getElementById("imgInput");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

input.addEventListener("change", async (e) => {
  const file = e.target.files[0];
  const arrayBuffer = await file.arrayBuffer(); // file -> ArrayBuffer
  console.log("Original ArrayBuffer:", arrayBuffer);

  // Image Object তৈরি
  const img = new Image();
  img.src = URL.createObjectURL(file);
  img.onload = () => {
    canvas.width = img.width;
    canvas.height = img.height;
    ctx.drawImage(img, 0, 0);

    // Canvas pixel data access
    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    const data = imageData.data; // Uint8ClampedArray (RGBA bytes)
console.log(data.length);
    // Mind-blowing effect: invert colors
    for(let i = 0; i < data.length; i += 4){
      data[i] = 255 - data[i];     // Red
      data[i+1] = 255 - data[i+1]; // Green
      data[i+2] = 255 - data[i+2]; // Blue
      // Alpha (data[i+3]) untouched
    }

    // নতুন image update
    ctx.putImageData(imageData, 0, 0);
    console.log("Pixel-level manipulation done!");
  };
});
</script>
